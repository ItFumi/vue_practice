<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>vue.js学習24~33</title>
		<link rel="stylesheet" type="text/css" href="css/common.css" />
		<script src="js/vue.js"></script>
	</head>
	<body>
		<div id="app">
			<input type="text" v-model="message">
			<h1>{{message}}</h1>
			<p>{{counter}}</p>
			<button @click="counter+=1">-1</button>
			<p>{{counter > 3 ? '3より上' : '3以下'}}</p>
			<p>{{ lessThanThree }}</p>
			<!-- 二重中括弧の中にメソッドを記載するとページが再描画される度に実行される。 -->
			<p>{{ lessThanThreeMethod() }}</p> 
			<h1 :class="{red:true,blue:false}">色変更</h1>
			<h1 :class="{red:!isActive,blue:isActive}">色変更</h1>
			<button @click="isActive = !isActive">色切り替え</button>
			<h1 :style="{color: textColor, 'background-color': bgColor}">色変更</h1>
		</div>
		<script>
			new Vue({
				el:"#app",
				data:{ // dataには初期値およびプレーンな値を記載。動的な値は記載できない。
					message: 'こんにちは',
					counter: 30,
					isActive: true,
					textColor: 'red',
					bgColor: 'blue'
				},
				computed:{
					lessThanThree: function() { // 動的な値はこちらに記載。
						// counterの値が変更された時のみ実行される
						return this.counter > 3 ? '3より上' : '3以下'
					}
				},
				methods:{
					lessThanThreeMethod: function() {
						return this.counter > 3 ? '3より上' : '3以下'
					}
				},
				watch:{
					counter: function() { //非同期の処理を記載。上記のcomputedではできない処理を記載。
						var vm = this;
						setTimeout(function(){
							vm.counter -= 1;
						}, 1000)
					}
				}
			})
		</script>
	</body>
</html>